{% extends 'base.html' %}

{% block header %}
    <h1>{% block title %}Figure 1.1{% endblock %}</h1>
{% endblock %}

{% block content %}
    <body>
        <div class="flex-text">
            <h1 class="title" id="figure1.1">Figure 1</h1>
        </div>
        <div class="flex-text">
            <p class="paragraph">Certains dires d’éleveurs laissent croire qu’il y aurait plus de naissances lors des pleines lunes, mais est-ce que c’est vrai? C’est ici qu’intervient la figure 1.1.</p>
        </div>
        <div class="flex-text">
            <p class="paragraph">Des données de naissances ont été mises sous la forme d’un graphique radar avec deux paramètres, le premier étant le niveau de pleine lune</p>
        </div>
        <div class="flex-text">
            <p class="paragraph">Le second paramètre lui est bien évidemment le nombre de naissances. Une fois le graphique mis en place, il est facile de voir s’il y a une influence ou non du cycle de pleine lune sur le nombre de naissances.</p>
        </div>
        <div class="figure" id="fig1.1">
            <canvas id="bar-chart" width="100%" height="100%"></canvas>
        </div>
            <script>
                var css = getComputedStyle(document.body)
                var bCol = css.getPropertyValue('--bColB')
                var bHovCol = css.getPropertyValue('--bHovColB')
                var baCol = css.getPropertyValue('--baColB')
                var baHovCol = css.getPropertyValue('--baHovColB')
                var tCol = css.getPropertyValue('--tCol')
                var lCol = css.getPropertyValue('--lCol')
                var xGCol = css.getPropertyValue('--xGCol')
                var xValCol = css.getPropertyValue('--xValCol')
                var yGCol = css.getPropertyValue('--yGCol')
                var yValCol = css.getPropertyValue('--yValCol')
                var background = css.getPropertyValue('--background')

                var datas = {{data | safe}}
                var bar_ctx = document.getElementById('bar-chart');
                var bar_chart = new Chart(bar_ctx, {
                    type: 'radar',
                    data: {
                        labels: [
                            "Nouvelle Lune",
                            "Premier Croissant",
                            "Premier Quartier",
                            "Gibbeuse Croissante",
                            "Pleine Lune",
                            "Gibbeuse Décroissante",
                            "Dernier Quartier",
                            "Dernier Croissant"
                          ],
                        datasets: [
                        {
                            label: 'Velages',
                            // [SUM NEW MOON, SUM WAXING CRESENT, SUM...]
                            data: datas,
                            borderColor: bCol,
                            hoverBorderColor: bHovCol,
                            backgroundColor: baCol,
                            hoverBackgroundColor: baHovCol,
                            hoverBorderWidth: 0
                        }
                        ]
                    },
                       options: {
                        layout: {
                          padding: 25
                        },
                        title: {
                            display: true,
                            text: "Graphique du taux de velages par phases de lune",
                            fontColor: tCol

                        },
                        legend: {
                            labels: {
                                fontColor: lCol
                            }
                        },
                        responsive: true,
                        maintainAspectRatio: false,
                        scale: {
                            gridLines: {
                               color: xGCol
                            },
                            pointLabels:{
                               fontColor:lCol,
                            },
                            ticks: {
                                backdropColor: background,
                                fontColor: lCol,
                                beginAtZero: true,
                                min: 300,
                            }
                        }
                    },
                   }
                );
            </script>
    </body>
{% endblock %}